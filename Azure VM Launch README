Terraform deployment with Azure resources


Plan

1. Installed Azure CLI 
2. **Resource Group Creation**:
    - You created an Azure resource group named “example-resources” in the “UK West” location using the **`azurerm_resource_group`** resource.
3. **Virtual Network Setup**:
    - Set up an internal virtual network called “example-network” with an address space of “10.0.0.0/16” using the **`azurerm_virtual_network`** resource.
4. **Subnet Configuration**:
    - defined a subnet named “internal” within the virtual network, specifying an address prefix of “10.0.2.0/24” using the **`azurerm_subnet`** resource.
5. **Network Interface Creation**:
    - created a network interface named “example-nic” associated with the resource group and the internal subnet. The IP configuration was set to “Dynamic” using the **`azurerm_network_interface`**resource.
6. **Linux Virtual Machine Provisioning**:
- provisioned a basic Linux Virtual Machine named “example-machine” with the following specifications:
    - Size: “Standard_B1s”
    - Admin username: “adminuser”
    - SSH key for authentication
    - OS disk configuration (caching, storage account type)
    - Source image reference (Ubuntu Server 22.04 LTS) using the **`azurerm_linux_virtual_machine`**resource.
    - code written
    - 
    
    ```
    #creating resouce resource_group_name
    
    resource "azurerm_resource_group" "example" {
      name     = "YinkaTest-Instance"
      location = "UK West"
    }
    
    #virtual network
    resource "azurerm_virtual_network" "example" {
      name                = "example-network"
      address_space       = ["10.0.0.0/16"]
      location            = azurerm_resource_group.example.location
      resource_group_name = azurerm_resource_group.example.name
    }
    
    resource "azurerm_subnet" "example" {
      name                 = "internal"
      resource_group_name  = azurerm_resource_group.example.name
      virtual_network_name = azurerm_virtual_network.example.name
      address_prefixes     = ["10.0.2.0/24"]
    }
    
    #public ip creation
    resource "azurerm_public_ip" "example" {
      name                = "vmPublicIp1"
      resource_group_name = azurerm_resource_group.example.name
      location            = azurerm_resource_group.example.location
      allocation_method   = "Static"
    
      tags = {
        environment = "Production"
      }
    }
    
    resource "azurerm_network_interface" "example" {
      name                = "example-nic"
      location            = azurerm_resource_group.example.location
      resource_group_name = azurerm_resource_group.example.name
    
      ip_configuration {
        name                          = "internal"
        subnet_id                     = azurerm_subnet.example.id
        private_ip_address_allocation = "Dynamic"
        public_ip_address_id          = azurerm_public_ip.example.id
      }
    }
    
    #vm size and name of vm
    
    resource "azurerm_linux_virtual_machine" "example" {
      name                = "example-machine"
      resource_group_name = azurerm_resource_group.example.name
      location            = azurerm_resource_group.example.location
      size                = "Standard_B1s"
      admin_username      = "adminuser"
      network_interface_ids = [
        azurerm_network_interface.example.id,
      ]
    
    #ssh key creation and location
      admin_ssh_key {
        username   = "adminuser"
        public_key = file("testazure.pub")
      }
    
      os_disk {
        caching = "ReadWrite"
    
        storage_account_type = "Standard_LRS"
      }
    
    #image of vm linux ubuntu server
      source_image_reference {
        publisher = "Canonical"
        offer     = "0001-com-ubuntu-server-jammy"
        sku       = "22_04-lts"
        version   = "latest"
    
      }
    
    }
    ```
    
    ```
    #creating resouce resource_group_name
    
    resource "azurerm_resource_group" "example" {
      name     = "YinkaTest-Instance"
      location = "UK West"
    }
    
    #virtual network
    resource "azurerm_virtual_network" "example" {
      name                = "example-network"
      address_space       = ["10.0.0.0/16"]
      location            = azurerm_resource_group.example.location
      resource_group_name = azurerm_resource_group.example.name
    }
    
    resource "azurerm_subnet" "example" {
      name                 = "internal"
      resource_group_name  = azurerm_resource_group.example.name
      virtual_network_name = azurerm_virtual_network.example.name
      address_prefixes     = ["10.0.2.0/24"]
    }
    
    #public ip creation
    resource "azurerm_public_ip" "example" {
      name                = "vmPublicIp1"
      resource_group_name = azurerm_resource_group.example.name
      location            = azurerm_resource_group.example.location
      allocation_method   = "Static"
    
      tags = {
        environment = "Production"
      }
    }
    
    resource "azurerm_network_interface" "example" {
      name                = "example-nic"
      location            = azurerm_resource_group.example.location
      resource_group_name = azurerm_resource_group.example.name
    
      ip_configuration {
        name                          = "internal"
        subnet_id                     = azurerm_subnet.example.id
        private_ip_address_allocation = "Dynamic"
        public_ip_address_id          = azurerm_public_ip.example.id
      }
    }
    
    #vm size and name of vm
    
    resource "azurerm_linux_virtual_machine" "example" {
      name                = "example-machine"
      resource_group_name = azurerm_resource_group.example.name
      location            = azurerm_resource_group.example.location
      size                = "Standard_B1s"
      admin_username      = "adminuser"
      network_interface_ids = [
        azurerm_network_interface.example.id,
      ]
    
    #ssh key creation and location
      admin_ssh_key {
        username   = "adminuser"
        public_key = file("testazure.pub")
      }
    
      os_disk {
        caching = "ReadWrite"
    
        storage_account_type = "Standard_LRS"
      }
    
    #image of vm linux ubuntu server
      source_image_reference {
        publisher = "Canonical"
        offer     = "0001-com-ubuntu-server-jammy"
        sku       = "22_04-lts"
        version   = "latest"
    
      }
    
    }
    ```
    

# Resources

[Terraform Registry](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/linux_virtual_machine)

[Terraform Registry](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/public_ip)

https://youtu.be/T1WxrEwyyKU?si=Ep-Hr-Ci_VT7vUvF
